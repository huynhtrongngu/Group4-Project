{"ast":null,"code":"var _jsxFileName = \"D:\\\\CNTT\\\\4\\\\HK1\\\\PMNM\\\\Group2-Project-main (1)\\\\Group2-Project-main\\\\frontend\\\\src\\\\components\\\\UserList.jsx\",\n  _process$env$REACT_AP,\n  _s = $RefreshSig$();\nimport { useEffect, useState, useMemo } from \"react\";\nimport axios from \"axios\";\n\n// base API URL: use REACT_APP_API_URL when provided (e.g. http://192.168.x.y:3000)\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_BASE = ((_process$env$REACT_AP = process.env.REACT_APP_API_URL) === null || _process$env$REACT_AP === void 0 ? void 0 : _process$env$REACT_AP.replace(/\\/$/, \"\")) || \"\";\nexport default function UserList({\n  onEdit\n}) {\n  _s();\n  const [users, setUsers] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const getInitials = (name = \"?\") => {\n    try {\n      var _parts$, _parts;\n      const parts = String(name).trim().split(/\\s+/);\n      const first = ((_parts$ = parts[0]) === null || _parts$ === void 0 ? void 0 : _parts$[0]) || \"?\";\n      const last = parts.length > 1 ? (_parts = parts[parts.length - 1]) === null || _parts === void 0 ? void 0 : _parts[0] : \"\";\n      return (first + last).toUpperCase();\n    } catch {\n      return \"?\";\n    }\n  };\n  useEffect(() => {\n    let cancelled = false;\n    const load = async () => {\n      try {\n        const res = await axios.get(`${API_BASE}/users`);\n        if (!cancelled) setUsers(res.data || []);\n      } catch (err) {\n        console.error(err);\n        alert(\"Không tải được users\");\n        if (!cancelled) setUsers([]);\n      } finally {\n        if (!cancelled) setLoading(false);\n      }\n    };\n    load();\n    return () => {\n      cancelled = true;\n    };\n  }, []);\n  const handleDelete = async id => {\n    if (!window.confirm(\"Bạn có chắc muốn xóa user này?\")) return;\n    try {\n      await axios.delete(`${API_BASE}/users/${id}`);\n      setUsers(users.filter(user => user._id !== id));\n    } catch (err) {\n      console.error(err);\n      alert(\"Xóa user thất bại\");\n    }\n  };\n  const handleEdit = user => {\n    onEdit === null || onEdit === void 0 ? void 0 : onEdit(user);\n  };\n  if (loading) return /*#__PURE__*/_jsxDEV(\"p\", {\n    className: \"loading\",\n    children: \"\\u0110ang t\\u1EA3i...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 23\n  }, this);\n  if (!users.length) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"empty\",\n    children: \"Ch\\u01B0a c\\xF3 user n\\xE0o. H\\xE3y th\\xEAm m\\u1EDBi \\u1EDF khung b\\xEAn c\\u1EA1nh.\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 12\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"ul\", {\n    className: \"list\",\n    children: users.map(u => /*#__PURE__*/_jsxDEV(\"li\", {\n      className: \"item\",\n      title: `${u.name} <${u.email}>`,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"item__row\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"item__main\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"avatar\",\n            \"aria-hidden\": true,\n            children: getInitials(u.name)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"item__name\",\n              children: u.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 74,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"meta\",\n              children: u.email\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 75,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"item__actions\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleEdit(u),\n            className: \"button button--small\",\n            children: \"S\\u1EEDa\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleDelete(u._id),\n            className: \"button button--small button--danger\",\n            children: \"X\\xF3a\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 11\n      }, this)\n    }, u._id || `${u.name}-${u.email}`, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }, this))\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 5\n  }, this);\n}\n_s(UserList, \"+quVjBMM9THpHvnUcBaphXhhZmo=\");\n_c = UserList;\nvar _c;\n$RefreshReg$(_c, \"UserList\");","map":{"version":3,"names":["useEffect","useState","useMemo","axios","jsxDEV","_jsxDEV","API_BASE","_process$env$REACT_AP","process","env","REACT_APP_API_URL","replace","UserList","onEdit","_s","users","setUsers","loading","setLoading","getInitials","name","_parts$","_parts","parts","String","trim","split","first","last","length","toUpperCase","cancelled","load","res","get","data","err","console","error","alert","handleDelete","id","window","confirm","delete","filter","user","_id","handleEdit","className","children","fileName","_jsxFileName","lineNumber","columnNumber","map","u","title","email","onClick","_c","$RefreshReg$"],"sources":["D:/CNTT/4/HK1/PMNM/Group2-Project-main (1)/Group2-Project-main/frontend/src/components/UserList.jsx"],"sourcesContent":["import { useEffect, useState, useMemo } from \"react\";\nimport axios from \"axios\";\n\n// base API URL: use REACT_APP_API_URL when provided (e.g. http://192.168.x.y:3000)\nconst API_BASE = process.env.REACT_APP_API_URL?.replace(/\\/$/, \"\") || \"\";\n\nexport default function UserList({ onEdit }) {\n  const [users, setUsers] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  const getInitials = (name = \"?\") => {\n    try {\n      const parts = String(name).trim().split(/\\s+/);\n      const first = parts[0]?.[0] || \"?\";\n      const last = parts.length > 1 ? parts[parts.length - 1]?.[0] : \"\";\n      return (first + last).toUpperCase();\n    } catch {\n      return \"?\";\n    }\n  };\n\n  useEffect(() => {\n    let cancelled = false;\n    const load = async () => {\n      try {\n        const res = await axios.get(`${API_BASE}/users`);\n        if (!cancelled) setUsers(res.data || []);\n      } catch (err) {\n        console.error(err);\n        alert(\"Không tải được users\");\n        if (!cancelled) setUsers([]);\n      } finally {\n        if (!cancelled) setLoading(false);\n      }\n    };\n\n    load();\n    return () => {\n      cancelled = true;\n    };\n  }, []);\n\n  const handleDelete = async (id) => {\n    if (!window.confirm(\"Bạn có chắc muốn xóa user này?\")) return;\n    try {\n      await axios.delete(`${API_BASE}/users/${id}`);\n      setUsers(users.filter(user => user._id !== id));\n    } catch (err) {\n      console.error(err);\n      alert(\"Xóa user thất bại\");\n    }\n  };\n\n  const handleEdit = (user) => {\n    onEdit?.(user);\n  };\n\n  if (loading) return <p className=\"loading\">Đang tải...</p>;\n  if (!users.length)\n    return <div className=\"empty\">Chưa có user nào. Hãy thêm mới ở khung bên cạnh.</div>;\n\n  return (\n    <ul className=\"list\">\n      {users.map((u) => (\n        <li\n          key={u._id || `${u.name}-${u.email}`}\n          className=\"item\"\n          title={`${u.name} <${u.email}>`}\n        >\n          <div className=\"item__row\">\n            <div className=\"item__main\">\n              <div className=\"avatar\" aria-hidden>{getInitials(u.name)}</div>\n              <div>\n                <div className=\"item__name\">{u.name}</div>\n                <div className=\"meta\">{u.email}</div>\n              </div>\n            </div>\n            <div className=\"item__actions\">\n              <button onClick={() => handleEdit(u)} className=\"button button--small\">Sửa</button>\n              <button onClick={() => handleDelete(u._id)} className=\"button button--small button--danger\">Xóa</button>\n            </div>\n          </div>\n        </li>\n      ))}\n    </ul>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}